/*!
 * @Author: chenqiwei.net
 * @Date: 2021-04-04 00:14:01
 * @Last Modified by: chenqiwei.net
 * @Last Modified time: 2021-10-27 21:38:06
 */
function AjaxJs(ajaxjs){var regDetectJs=/<script(.|\n)*?>(.|\n|\r\n)*?<\/script>/gi,jsContained=ajaxjs.match(regDetectJs);if(jsContained)for(var regGetJS=/<script(.|\n)*?>((.|\n|\r\n)*)?<\/script>/im,jsNums=jsContained.length,i=0;i<jsNums;i++){var jsSection=jsContained[i].match(regGetJS);jsSection[2]&&(window.execScript?window.execScript(jsSection[2]):window.eval(jsSection[2]))}}function openAjax(url,type="1"){var urlGet="";"comment"!=type&&(loading.begin(),-1==url.indexOf("?pjax")&&(urlGet="?pjax"));var ajax=new XMLHttpRequest;ajax.open("get",url+urlGet),ajax.send(),ajax.onreadystatechange=function(){if(4==ajax.readyState&&200==ajax.status)"comment"==type?document.getElementsByTagName("article")[0].insertAdjacentHTML("afterEnd",ajax.responseText):(document.getElementsByClassName("site-content")[0].innerHTML=ajax.responseText,document.body.scrollTop=0,document.documentElement.scrollTop=0,loading.end("last")),(new WOW).init(),changeA(),AjaxJs(ajax.responseText);else if(404==ajax.status){loading.end();var tip=document.createElement("div");tip.id="tip-404",tip.innerHTML="404：找不到您要访问的页面 :(",document.body.appendChild(tip),setTimeout((function(){document.body.removeChild(document.getElementById("tip-404"))}),2e3)}else 500==ajax.status&&(loading.end(),location.reload())}}function changeA(){var a=document.getElementById("paper").getElementsByTagName("a");function stop(event){(event=event||window.event).preventDefault?event.preventDefault():event.returnValue=!1}for(var i=0;i<a.length;i++)a[i].onclick=function(e){var ahref;if("2null2"!="2"+this.getAttribute("href")+"2"&&-1==this.getAttribute("href").indexOf("#")&&-1==this.getAttribute("href").indexOf("(")&&-1!=this.getAttribute("href").indexOf(window.location.host)){var urlf,urlg=window.location.pathname.substring(1).replace(/\//g,"-");"-"==urlg.substr(urlg.length-1,1)&&(urlg=urlg.substr(0,urlg.length-1));var top=findPosY(this);return window.history.replaceState("","",window.location.href+"#"+top),stop(e),openAjax(this.getAttribute("href")),window.history.pushState("","",this.getAttribute("href")+"#"+urlg),!1}}}function commentData(type,id){openAjax("/api/comment/"+type+"/"+id,"comment")}function findPosY(obj){var top=0;if(obj.offsetParent){do{top+=obj.offsetTop}while(obj=obj.offsetParent);return[top]}}window.addEventListener("DOMContentLoaded",(function(){changeA(),(new WOW).init()})),window.addEventListener("popstate",(function(e){openAjax(window.location.pathname);var hash=window.location.hash.match(/\#\d+(\.\d+)?/g),str=window.location.hash.match(/\#\d+(\.\d+)?/g).pop(),url;Bounding(str.substr(1,str.length-1))}),!1);var imgLightbox=function openImgBox(){return{open:function(e){if(loading.begin(),-1==e.src.indexOf("?x-oss-process"))var src=e.src;else var src=e.src.substring(0,e.src.indexOf("?"));var box=document.createElement("div"),imgBox=document.documentElement.clientHeight;box.id="Lightbox",box.innerHTML='<div id="imgLightbox"  onclick="imgLightbox.close();"><form style="width:100% ;height:100%"><table border=0 cellpadding=0 cellspacing=0 style="width:100% ;height:100%"><tr><td style="width:100%;" align="center" valign="middle"><img id="imgLightImg" style="max-height:'+imgBox+'px;" src="'+src+'" onerror="this.src=base+\'/assets/img/no-img.jpg\'"/></td></tr></table></form></div><div id="imgLightbox-button" onclick="imgLightbox.close();">&Cross;</div>',document.body.appendChild(box),loading.end("imgLightImg")},close:function(){document.body.removeChild(document.getElementById("Lightbox"))}}}(),display=function displayDis(){return{none:function(e){document.getElementById(e).classList.add("none")},block:function(e){document.getElementById(e).classList.remove("none")},auto:function(e){(""+document.getElementById(e).className).indexOf("none")>-1?document.getElementById(e).classList.remove("none"):document.getElementById(e).classList.add("none")}}}(),loading=function loadingBox(){return{begin:function(e){document.getElementById("loading").classList.add("loading")},end:function(e=""){""!=e?document.getElementById(e).onload=function(){document.getElementById("loading").classList.remove("loading")}:document.getElementById("loading").classList.remove("loading")}}}();function footerInfo(type=""){if("index"==type)return createFooter('<div class="icp"><div class="wow-footer fadeIn left"><a href="//beian.miit.gov.cn" rel="noreferrer" target="_blank">蜀ICP备20000904号-3</a></div><div class="wow-footer fadeIn right"><a href="//www.beian.gov.cn/portal/registerSystemInfo?recordcode=51012202000902" rel="noreferrer" target="_blank">川公网安备51012202000902号</a></div></div>');var endTime=parseInt((new Date).getTime()/1e3)-new Date("2021-01-17 00:00:00").getTime()/1e3,timeDay;return createFooter('<div class="copy"><div class="wow-footer fadeIn left">&copy; 2021 <a href="/">孤独日记</a><span class="l-none"> All Rights Reserved</span></div><div class="wow-footer fadeIn right">由 <a href="/go#cn.wordpress.org" rel="nofollow" target="_blank">Wordpress</a> 强力驱动<span class="l-none">, 已运行 <span title="始于 2021-01-17">'+parseInt(endTime/60/60/24)+"</span> 天</span></div></div>")}function createFooter(con=""){if(con='<div class="fix-width">'+con+"</div>",document.getElementById("footer"))document.getElementById("footer").innerHTML=con;else{var footer=document.createElement("footer");footer.className="footer",footer.id="footer",footer.innerHTML=con,document.getElementById("paper").appendChild(footer)}var wow;new WOW({boxClass:"wow-footer"}).init()}function pagenavi(url,type){var ajax=new XMLHttpRequest,urlGet="";-1==url.indexOf("?pjax")&&(urlGet="?pjax"),ajax.open("get",url+urlGet),ajax.send(),loading.begin(),ajax.onreadystatechange=function(){if(4==ajax.readyState&&200==ajax.status){var content=ajax.responseText,next=document.getElementsByClassName("content-area")[0];content=(content=(content=content.substring(content.indexOf('<div class="content-area list">'),content.indexOf("<\/script>"))+"<\/script>").replace('<div class="content-area list">',"")).replace("</div><button","<button");var getList=document.getElementsByClassName("list")[0];"next"==type?(next.insertAdjacentHTML("beforeEnd",content),getList.removeChild(document.getElementById("nextPage")),document.getElementsByClassName("previous-page")[1]?getList.removeChild(document.getElementsByClassName("previous-page")[1]):getList.removeChild(document.getElementById("previousPage"))):"previous"==type&&(document.getElementById("previousPage").insertAdjacentHTML("afterEnd",content),getList.removeChild(document.getElementsByClassName("more-page")[0]),getList.removeChild(document.getElementById("previousPage")));var urlf,urlg=window.location.pathname.substring(1).replace(/\//g,"-");"-"==urlg.substr(urlg.length-1,1)&&(urlg=urlg.substr(0,urlg.length-1)),url=(url=url.split("?"))[0],window.history.pushState("","",url+"#"+urlg),changeA(),AjaxJs(ajax.responseText),loading.end()}}}function Bounding(cheight){var height=document.body.clientHeight,number=0,length=cheight,frequency=1,time=setInterval((function(){2==(number+=1)?clearInterval(time):document.documentElement.scrollTop=length}),500)}document.body.onload=function(){loading.end()};var p=0,t=0;window.addEventListener("scroll",(function(e){var here=document.getElementsByClassName("site-header")[0];p=document.body.scrollTop||document.documentElement.scrollTop,t<=p||p<=1?here.classList.remove("fixed","fadeInDown"):here.classList.add("fixed","animated-05","fadeInDown"),t=p}));